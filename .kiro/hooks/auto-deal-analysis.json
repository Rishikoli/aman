{
  "name": "Auto Deal Analysis",
  "description": "Automatically trigger AI-powered deal analysis when deal files are updated or created",
  "trigger": {
    "type": "file_change",
    "patterns": [
      "deals/**/*.json",
      "deals/**/*.pdf",
      "deals/**/*.xlsx",
      "deals/**/*.docx"
    ],
    "events": ["created", "modified"]
  },
  "conditions": [
    {
      "type": "file_size",
      "operator": ">",
      "value": 1024,
      "description": "Only process files larger than 1KB"
    },
    {
      "type": "file_extension",
      "operator": "in",
      "value": [".json", ".pdf", ".xlsx", ".docx"],
      "description": "Only process supported file types"
    }
  ],
  "actions": [
    {
      "type": "agent_execution",
      "agent": "deal_analyzer",
      "prompt": "Analyze the updated deal file and extract key information including:\n1. Financial metrics and valuation\n2. Risk assessment factors\n3. Synergy opportunities\n4. Compliance and legal considerations\n5. Market intelligence insights\n\nProvide a comprehensive analysis report with actionable recommendations.",
      "context": {
        "include_files": true,
        "file_path": "{{trigger.file_path}}",
        "deal_id": "{{extract_deal_id_from_path}}",
        "timestamp": "{{current_timestamp}}"
      }
    },
    {
      "type": "notification",
      "message": "Deal analysis completed for {{trigger.file_name}}",
      "channels": ["ui", "email"]
    }
  ],
  "settings": {
    "enabled": true,
    "debounce_ms": 5000,
    "max_executions_per_hour": 10,
    "retry_on_failure": true,
    "max_retries": 3
  },
  "metadata": {
    "created_at": "2025-01-27T00:00:00Z",
    "version": "1.0.0",
    "tags": ["deals", "analysis", "automation", "ai"]
  }
}